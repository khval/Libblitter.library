# Makefile for project "libblitter"
# Automatically generated by idltool
# 
# $Id: genskeleton.cpp,v 1.13 2010-03-17 14:37:07 cmincea Exp $
# 

# Uncomment the next line if you are cross compiling
# CROSS_COMPILE = ppc-amigaos-

CC     = $(CROSS_COMPILE)gcc 
CXX    = $(CROSS_COMPILE)c++ 
AS     = $(CROSS_COMPILE)as 
LD     = $(CROSS_COMPILE)ld 
RANLIB = $(CROSS_COMPILE)ranlib 
RM     = delete
# RM     = rm

# Change these as required
OPTIMIZE = -O3
DEBUG    = # -gstabs -DDEBUG
CFLAGS   = -Wall $(OPTIMIZE) $(DEBUG)

# Flags passed to gcc during linking
LINK = 

# Name of the "thing" to build
TARGET = libblitter.library

# Additional linker libraries
LIBS = 

# Version of the library to build
VERSION = 53

# "main" Interface Source Files
main_SRCS = main/Obtain.c main/Release.c main/blit_init.c main/doBlitter.c 
main_SRCS += uae/blitfunc.c uae/blittable.c

dependences += uae_inc/blit.h  uae_inc/blitfunc.h 


# -------------------------------------------------------------
# Nothing should need changing below this line

SRCS = init.c

OBJS = $(main_SRCS:.c=.o)  $(SRCS:.c=.o)
# Rules for building
$(TARGET):  $(dependences) $(OBJS)
	$(CC) $(LINK) -nostartfiles -o $(TARGET) $(OBJS) $(LIBS)

.PHONY: clean
clean: clean_dependences
	$(RM) $(TARGET) $(OBJS)

.PHONY: revision
revision:
	bumprev $(VERSION) $(TARGET)

clean_dependences:
	$(RM) $(dependences) uae/genblitter.elf

uae_inc/blit.h: uae/genblitter.elf
	uae/genblitter.elf i >uae_inc/blit.h
uae/blitfunc.c: uae/genblitter.elf uae_inc/blitfunc.h
	uae/genblitter.elf f >uae/blitfunc.c
uae_inc/blitfunc.h: uae/genblitter.elf
	uae/genblitter.elf h >uae_inc/blitfunc.h
uae/blittable.c: uae/genblitter.elf uae_inc/blitfunc.h
	uae/genblitter.elf t >uae/blittable.c

uae/genblitter.o: uae/genblitter.c
	$(CC) -I uae_inc -c -nostartfiles uae/genblitter.c -o uae/genblitter.o

uae/blitops.o: uae/blitops.c
	$(CC) -I uae_inc -c -nostartfiles uae/blitops.c -o uae/blitops.o  

uae/genblitter.elf: uae/genblitter.o uae/blitops.o
	$(CC) -I uae_inc -o uae/genblitter.elf uae/genblitter.o uae/blitops.o

uae/%.o: uae/%.c
	gcc  -I uae_inc -Wall -O3    -c $< $(libs) -o $@
